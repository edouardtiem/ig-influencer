# Perplexity Search Results

> Generated: 2026-01-31T11:36:42.662Z
> Model: sonar-pro
> Duration: 9.4s

---

## Problem

ComfyUI Z-Image QR code noise output problem 2025 2026 - model generates static noise instead of image - z_image_bf16 UNETLoader not working - how to fix broken Z-Image generation in ComfyUI


---

## Search Results

**To fix Z-Image QR code noise output (static noise instead of coherent images) in ComfyUI with `z_image_bf16` and broken **UnetLoaderGGUF**, follow these steps prioritizing ComfyUI-GGUF installation, model verification, and updates—common 2024-2026 issues stem from node loading failures, Python deps, and model paths.[1][2][3]**

### Step 1: Install/Repair ComfyUI-GGUF (Primary Fix for UnetLoaderGGUF)
UnetLoaderGGUF fails to load (shows red/missing nodes) due to security restrictions or Python env issues, causing null models and noise output.[1][2]
```
1. Locate `ComfyUI/custom_nodes/ComfyUI-Manager/config.ini` (or Manager dir).
2. Edit: Set `security_level = weak` (from `normal`).
3. Restart ComfyUI > Open Manager (top button) > Install Custom Node.
4. Search/paste: `https://github.com/city96/ComfyUI-GGUF` > Install + Restart.
```
- Avoid manual `git clone`—it skips virtualenv.[1]
- Post-install: Verify `UnetLoaderGGUF` appears in node search (no red errors).[3]

### Step 2: Verify & Place Z-Image GGUF Model
Static noise indicates invalid/corrupt `z_image_bf16` GGUF in wrong path or bf16 incompatibility.[3][6]
```
- Place GGUF in: `ComfyUI/models/unet/` (e.g., `z_image_bf16.gguf`).
- In UnetLoaderGGUF: Select `unet_name` from dropdown (auto-populates valid GGUF files).[3]
- Refresh ComfyUI or restart after placing files.[4]
```
- **Test model integrity**: Re-download if "deserializing header" error; check disk space/permissions.[6]
- **bf16 fix**: If noise persists, convert/regenerate GGUF to fp16 via original repo tools (GGUF inconsistencies common).[3]

### Step 3: Update ComfyUI & Dependencies (Z-Image ControlNet Fix)
Z-Image ControlNet bugs (noise/static) fixed in recent updates.[5]
```
- Update ComfyUI: `git pull` in root dir + restart.
- Via Manager: Update all nodes (fixes #11103).[5]
- Reinstall deps: `pip install -r requirements.txt` (targets gguf/numpy faults).[1]
```
- Python 3.10+ required; avoid mixing versions.[2]

### Step 4: Workflow Debug & Test
```
1. Load basic workflow: UNETLoaderGGUF → KSampler → VAE Decode.
2. Inputs: Valid prompt, low CFG (4-7 for QR/Z-Image), 20 steps.
3. If noise: Swap to standard UNETLoader (non-GGUF) + Flux/SDXL unet from `models/unet/`.[4]
4. Check console: "null/undefined" = bad model; "import failed" = node conflict.[2]
```
| Issue | Symptom | Fix Source |
|-------|---------|------------|
| **Red Node** | UnetLoaderGGUF missing | Security=weak + Manager install[1] |
| **Static Noise** | GGUF load fail | Re-download to `models/unet/`[3][6] |
| **Null Model** | Dropdown empty | Update ComfyUI + deps[2][5] |
| **Z-ControlNet** | Noisy QR | `git pull` ComfyUI[5] |

### Quick Test Code (Python Console in ComfyUI)
```python
# Verify GGUF loads (run in ComfyUI extra_model_paths.yaml setup)
import gguf
reader = gguf.GGUFReader("ComfyUI/models/unet/z_image_bf16.gguf")
print(f"Valid: {reader.n_tensors}")  # >0 = good
```
If tensor count=0, regenerate GGUF.[3]

Update ComfyUI fully first—resolves 80% Z-Image issues per GitHub.[5] Test with Flux.1 unet if Z-model fails.[4]

---

## Citations

1. https://github.com/city96/ComfyUI-GGUF/issues/117
2. https://discuss.huggingface.co/t/load-diffusion-model-and-unet-loader-gguf-null-undefined/131710
3. https://www.runcomfy.com/comfyui-nodes/ComfyUI-GGUF/UnetLoaderGGUF
4. https://comfyui-wiki.com/en/comfyui-nodes/advanced/loaders/unet-loader
5. https://github.com/Comfy-Org/ComfyUI/issues/11103
6. https://docs.comfy.org/troubleshooting/model-issues
7. https://github.com/Comfy-Org/ComfyUI/issues/6111

---

## Related Questions

- How can I verify if my Python environment is correctly set up for ComfyUI
- What steps should I take to ensure the correct installation of the GGUF file
- Are there any specific configurations in the config.ini file that could fix the Z-image generation issue
- How can I troubleshoot the "UnetLoaderGGUF" node not loading properly
- What are the common causes of static noise in Z-image generation in ComfyUI

---

## Suggested Next Steps

Based on the search results above:

1. Review the most relevant citations for deeper understanding
2. Try the suggested solutions in order of relevance
3. If the problem persists, refine the search with more specific details

---

*Search powered by Perplexity Sonar Pro*
